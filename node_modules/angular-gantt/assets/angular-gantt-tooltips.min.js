/*! angular-gantt 15-12-2014 */
use strict;

!function(){"use strict";angular.module("gantt.tooltips",["gantt","gantt.tooltips.templates"]).directive("ganttTooltips",["$compile",function(a){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",dateFormat:"=?"},link:function(b,c,d,e){var f=e.gantt.api;if(b.options&&"object"==typeof b.options.tooltips)for(var g in b.options.tooltips)b[g]=b.options[g];void 0===b.enabled&&(b.enabled=!0),void 0===b.dateFormat&&(b.dateFormat="MMM DD, HH:mm");var h=[];b.$watch("dateFormat",function(a){angular.forEach(h,function(b){b.dateFormat=a})}),b.$watch("enabled",function(a){angular.forEach(h,function(b){b.enabled=a})}),f.directives.on["new"](b,function(c,d,e){if("ganttTask"===c){var f=d.$new();h.push(f),f.dateFormat=b.dateFormat,f.enabled=b.enabled,e.append(a('<gantt-tooltip ng-model="task"></gantt-tooltip>')(f)),f.$on("$destroy",function(){var a=h.indexOf(f);a>-1&&h.splice(a,1)})}})}}}])}(),function(){"use strict";angular.module("gantt.tooltips").directive("ganttTooltip",["$timeout","$document","ganttDebounce","ganttSmartEvent",function(a,b,c,d){return{restrict:"E",templateUrl:function(a,b){return void 0===b.templateUrl?"plugins/tooltips/tooltip.tmpl.html":b.templateUrl},scope:!0,replace:!0,controller:["$scope","$element","ganttUtils",function(e,f,g){var h,i,j=angular.element(b[0].body),k=f.parent();e.css={},e.visible=!1,e.getFromLabel=function(){var a=g.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"dateFormat",e.dateFormat);return e.task.model.from.format(a)},e.getToLabel=function(){var a=g.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"dateFormat",e.dateFormat);return e.task.model.to.format(a)},e.$watch("isTaskMouseOver",function(b){h&&a.cancel(h);var c=g.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"enabled",e.enabled);c&&b===!0?h=a(function(){n(i)},500,!0):e.task.active||p()}),e.task.$element.bind("mousemove",function(a){i=a.clientX}),e.task.$element.bind("mouseenter",function(a){e.mouseEnterX=a.clientX,e.isTaskMouseOver=!0,e.$digest()}),e.task.$element.bind("mouseleave",function(){e.mouseEnterX=void 0,e.isTaskMouseOver=!1,e.$digest()});var l=d(e,j,"mousemove",c(function(a){o(a.clientX)},5,!1));e.$watch("task.isMoving",function(a){a===!0?l.bind():a===!1&&(l.unbind(),p())});var m=function(){var a=b[0];return a.documentElement.clientWidth||a.documentElement.getElementById("body")[0].clientWidth},n=function(b){e.visible=!0,a(function(){o(b),e.css.top=k[0].getBoundingClientRect().top+"px",e.css.marginTop=-f[0].offsetHeight-8+"px",e.css.opacity=1},0,!0)},o=function(a){a+f[0].offsetWidth>m()?(e.css.left=a+20-f[0].offsetWidth+"px",f.addClass("gantt-task-infoArrowR"),f.removeClass("gantt-task-infoArrow")):(e.css.left=a-20+"px",f.addClass("gantt-task-infoArrow"),f.removeClass("gantt-task-infoArrowR"))},p=function(){e.css.opacity=0,e.visible=!1};e.gantt.api.directives.raise["new"]("ganttTooltip",e,f),e.$on("$destroy",function(){e.gantt.api.directives.raise.destroy("ganttTooltip",e,f)})}]}}])}();
//# sourceMappingURL=angular-gantt-tooltips.min.js.map