/*! angular-gantt 15-12-2014 */
use strict;

angular.module("gantt.bounds.templates",[]).run(["$templateCache",function(a){a.put("plugins/bounds/taskBounds.tmpl.html",'<div ng-show="bounds && isTaskMouseOver && enabled" class="gantt-task-bounds" ng-style="getCss()" ng-class="getClass()"></div>\n')}]),angular.module("gantt.drawtask.templates",[]).run(["$templateCache",function(){}]),angular.module("gantt.labels.templates",[]).run(["$templateCache",function(a){a.put("plugins/labels/labelsBody.tmpl.html",'<div class="gantt-labels-body"\n     ng-style="getLabelsCss()">\n    <div gantt-vertical-scroll-receiver>\n        <div ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id">\n            <gantt-row-label></gantt-row-label>\n        </div>\n    </div>\n</div>\n'),a.put("plugins/labels/labelsHeader.tmpl.html",'<div class="gantt-labels-header">\n    <gantt-row-header></gantt-row-header>\n</div>\n'),a.put("plugins/labels/rowHeader.tmpl.html",'<div ng-show="gantt.columnsManager.columns.length > 0 && gantt.columnsManager.headers.length > 0">\n    <div ng-repeat="header in gantt.columnsManager.headers">\n        <div class="gantt-row-height" ng-class="{\'gantt-labels-header-row\': $last, \'gantt-labels-header-row-last\': $last}"><span>{{$last ? pluginScope.header : ""}}</span></div>\n    </div>\n</div>\n'),a.put("plugins/labels/rowLabel.tmpl.html",'<div class="gantt-row-label gantt-row-height"\n     ng-class-odd="\'gantt-background-row\'"\n     ng-class-even="\'gantt-background-row-alt\'"\n     ng-class="row.model.classes" ng-style="::{\'background-color\': row.model.color, \'height\': row.model.height}">\n    <span>{{row.model.name}}</span>\n</div>\n'),a.put("plugins/labels/rowLabels.tmpl.html",'<div ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id">\n    <gantt-row-label></gantt-row-label>\n</div>\n'),a.put("plugins/labels/sideContentLabels.tmpl.html",'<div class="gantt-side-content-labels">\n    <gantt-labels-header>\n    </gantt-labels-header>\n    <gantt-labels-body>\n    </gantt-labels-body>\n</div>\n')}]),angular.module("gantt.movable.templates",[]).run(["$templateCache",function(){}]),angular.module("gantt.progress.templates",[]).run(["$templateCache",function(a){a.put("plugins/progress/taskProgress.tmpl.html","<div ng-cloak ng-show='enabled' class='gantt-task-progress' ng-style=\"getCss()\" ng-class=\"getClasses()\"></div>\n")}]),angular.module("gantt.sortable.templates",[]).run(["$templateCache",function(){}]),angular.module("gantt.tooltips.templates",[]).run(["$templateCache",function(a){a.put("plugins/tooltips/tooltip.tmpl.html",'<div ng-show="showTooltips && visible" class="gantt-task-info" ng-cloak ng-style="css">\n    <div class="gantt-task-info-content">\n        {{ task.model.name }}</br>\n        <small>\n            {{\n            task.isMilestone() === true && (getFromLabel()) || (getFromLabel() + \' - \' + getToLabel());\n            }}\n        </small>\n    </div>\n</div>\n')}]),function(){"use strict";angular.module("gantt.bounds",["gantt","gantt.bounds.templates"]).directive("ganttBounds",["moment","$compile",function(a,b){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(c,d,e,f){var g=f.gantt.api;if(c.options&&"object"==typeof c.options.bounds)for(var h in c.options.bounds)c[h]=c.options[h];void 0===c.enabled&&(c.enabled=!0);var i=[];c.$watch("enabled",function(a){angular.forEach(i,function(b){b.enabled=a})}),g.directives.on["new"](c,function(a,d,e){if("ganttTask"===a){var f=d.$new();i.push(i),f.enabled=c.enabled,e.append(b("<gantt-task-bounds></gantt-bounds>")(f)),f.$on("$destroy",function(){var a=i.indexOf(f);a>-1&&i.splice(a,1)})}}),g.tasks.on.clean(c,function(b){void 0===b.est||a.isMoment(b.est)||(b.est=a(b.est)),void 0===b.lct||a.isMoment(b.lct)||(b.lct=a(b.lct))})}}}])}(),function(){"use strict";angular.module("gantt.drawtask",["gantt"]).directive("ganttDrawTask",["ganttMouseOffset","moment",function(a,b){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",taskModelFactory:"=taskFactory"},link:function(c,d,e,f){var g=f.gantt.api;g.directives.on["new"](c,function(d,e,f){if("ganttRow"===d){var h=function(d){var f=d.target?d.target:d.srcElement;if(c.enabled&&f.className.indexOf("gantt-row")>-1){var h=g.core.getDateByPosition(a.getOffset(d).x),i=b(h),j=c.taskModelFactory();j.from=h,j.to=i;var k=e.row.addTask(j);k.isResizing=!0,k.updatePosAndSize(),e.row.updateVisibleTasks(),e.row.$element.scope().$digest()}};f.on("mousedown",h),e.drawTaskHandler=h}}),g.directives.on.destroy(c,function(a,b,c){"ganttRow"===a&&(c.off("mousedown",b.drawTaskHandler),delete b.drawTaskHandler)})}}}])}(),function(){"use strict";angular.module("gantt.movable",["gantt"]).directive("ganttMovable",["ganttMouseButton","ganttMouseOffset","ganttSmartEvent","ganttMovableOptions","ganttUtils","$window","$document","$timeout",function(a,b,c,d,e,f,g,h){return{restrict:"E",require:"^gantt",scope:{enabled:"=",allowMoving:"=?",allowResizing:"=?",allowRowSwitching:"=?"},link:function(i,j,k,l){var m=l.gantt.api;if(i.options&&"object"==typeof i.options.movable)for(var n in i.options.movable)i[n]=i.options[n];d.initialize(i),m.registerEvent("tasks","move"),m.registerEvent("tasks","moveBegin"),m.registerEvent("tasks","moveEnd"),m.registerEvent("tasks","resize"),m.registerEvent("tasks","resizeBegin"),m.registerEvent("tasks","resizeEnd"),m.registerEvent("tasks","change");var o,p,q="ontouchstart"in f||f.DocumentTouch&&g[0]instanceof f.DocumentTouch,r="touchstart mousedown",s="touchmove mousemove",t="touchend mouseup",u=5,v=3,w=15,x=5;m.directives.on["new"](i,function(d,j,k){if("ganttTask"===d){var l,m=angular.element(f),n=j.row.rowsManager.gantt.body.$element,y=j.row.rowsManager.gantt.scroll.$element,z=!1;k.on(r,function(c){c.preventDefault(),q&&(c=b.getTouch(c));var d=e.firstProperty([j.task.model.movable,j.task.row.model.movable],"enabled",i.enabled);if(d){var f=b.getOffset(c).x,g=E(f);if(""!==g&&1===a.getButton(c)){var h=b.getOffsetForElement(n[0],c).x;G(g,h)}j.$digest()}}),k.on("mousemove",function(a){var c=e.firstProperty([j.task.model.movable,j.task.row.model.movable],"enabled",i.enabled);if(c){var d=b.getOffset(a).x,f=E(d);""===f||!j.task.isMoving&&"M"===f?k.css("cursor",""):k.css("cursor",F(f))}});var A=function(a,b){B(a,b),C(a,b)},B=function(a,c){var d=b.getOffsetForElement(n[0],c),f=d.x;if(j.task.mouseOffsetX=f,"M"===a){var g=e.firstProperty([j.task.model.movable,j.task.row.model.movable],"allowRowSwitching",i.allowRowSwitching);if(g){var h=y[0].getBoundingClientRect(),k=e.scopeFromPoint(h.left,c.clientY),l=k.row,m=j.task.row;void 0!==l&&m!==l&&(l.moveTaskToRow(j.task,!0),m.$element.scope().$digest(),l.$element.scope().$digest())}var p=e.firstProperty([j.task.model.movable,j.task.row.model.movable],"allowMoving",i.allowMoving);p&&(f-=o,"truncate"!==j.taskOutOfRange&&(0>f?f=0:f+j.task.width>=j.gantt.width&&(f=j.gantt.width-j.task.width)),j.task.moveTo(f),j.$digest(),j.row.rowsManager.gantt.api.tasks.raise.move(j.task))}else"E"===a?("truncate"!==j.taskOutOfRange&&(f<j.task.left?f=j.task.left:f>j.gantt.width&&(f=j.gantt.width)),j.task.setTo(f),j.$digest(),j.row.rowsManager.gantt.api.tasks.raise.resize(j.task)):("truncate"!==j.taskOutOfRange&&(f>j.task.left+j.task.width?f=j.task.left+j.task.width:0>f&&(f=0)),j.task.setFrom(f),j.$digest(),j.row.rowsManager.gantt.api.tasks.raise.resize(j.task));z=!0},C=function(a,c){var d=b.getOffsetForElement(n[0],c),e=y[0].scrollLeft,f=y[0].offsetWidth,g=y[0].scrollWidth,i=e+f,k=!1;d.x<p?e>0&&d.x<=e+x&&(d.x-=w,k=!0,j.row.rowsManager.gantt.api.scroll.left(w)):g>i&&d.x>=i-x&&(d.x+=w,k=!0,j.row.rowsManager.gantt.api.scroll.right(w)),k&&(l=h(function(){A(a,c)},100,!0))},D=function(){void 0!==l&&(h.cancel(l),l=void 0)},E=function(a){var b=0,c=e.firstProperty([j.task.model.movable,j.task.row.model.movable],"allowResizing",i.allowResizing),d=e.firstProperty([j.task.model.movable,j.task.row.model.movable],"allowRowSwitching",i.allowRowSwitching),f=e.firstProperty([j.task.model.movable,j.task.row.model.movable],"allowMoving",i.allowMoving);return c&&(b=k[0].offsetWidth<10?v:u),c&&a>k[0].offsetWidth-b?"E":c&&b>a?"W":(f||d)&&a>=b&&a<=k[0].offsetWidth-b?"M":""},F=function(a){switch(a){case"E":return"e-resize";case"W":return"w-resize";case"M":return"move"}},G=function(a,d){void 0===j.task.originalModel&&(j.task.originalRow=j.task.row,j.task.originalModel=j.task.model,j.task.model=angular.copy(j.task.originalModel)),"M"===a?(k.addClass("gantt-task-moving"),j.task.isMoving||j.row.rowsManager.gantt.api.tasks.raise.moveBegin(j.task)):(k.addClass("gantt-task-resizing"),j.task.isMoving||j.row.rowsManager.gantt.api.tasks.raise.resizeBegin(j.task)),j.task.isMoving||(p=d,o=d-j.task.modelLeft),z=!1,j.task.moveMode=a,j.task.isMoving=!0,j.task.active=!0;var e=function(c){c.stopImmediatePropagation(),q&&(c=b.getTouch(c)),j.task.isMoving&&(D(),A(a,c))},f=c(j,m,s,e);f.bind(),c(j,m,t,function(a){q&&(a=b.getTouch(a)),f.unbind(),H(a),j.$digest()}).bindOnce(),k.css("cursor",F(a)),angular.element(g[0].body).css({"-moz-user-select":"-moz-none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none",cursor:F(a)})},H=function(){if(k.removeClass("gantt-task-moving"),k.removeClass("gantt-task-resizing"),void 0!==j.task.originalModel){if(angular.extend(j.task.originalModel,j.task.model),j.task.model=j.task.originalModel,j.task.row.model.id!==j.task.originalRow.model.id){var a=j.task.row;a.removeTask(j.task.model.id,!1,!0),j.task.row=j.task.originalRow,a.moveTaskToRow(j.task,!1)}delete j.task.originalModel,delete j.task.originalRow,j.$apply()}j.task.isMoving=!1,j.task.active=!1,D(),k.css("cursor",""),angular.element(g[0].body).css({"-moz-user-select":"","-webkit-user-select":"","-ms-user-select":"","user-select":"",cursor:""}),"M"===j.task.moveMode?j.row.rowsManager.gantt.api.tasks.raise.moveEnd(j.task):j.row.rowsManager.gantt.api.tasks.raise.resizeEnd(j.task),j.task.moveMode=void 0,z===!0&&(z=!1,j.task.row.sortTasks(),j.row.rowsManager.gantt.api.tasks.raise.change(j.task))};j.task.isResizing?(delete j.task.isResizing,G("E",j.task.mouseOffsetX)):j.task.isMoving&&G("M",j.task.mouseOffsetX)}})}}}])}(),function(){"use strict";angular.module("gantt.progress",["gantt","gantt.progress.templates"]).directive("ganttProgress",["moment","$compile",function(a,b){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(c,d,e,f){var g=f.gantt.api;if(c.options&&"object"==typeof c.options.progress)for(var h in c.options.progress)c[h]=c.options[h];void 0===c.enabled&&(c.enabled=!0);var i=[];c.$watch("enabled",function(a){angular.forEach(i,function(b){b.enabled=a})}),g.directives.on["new"](c,function(a,d,e){if("ganttTask"===a){var f=d.$new();i.push(f),f.enabled=c.enabled,e.append(b('<gantt-task-progress ng-if="task.model.progress !== undefined"></gantt-task-progress>')(f)),f.$on("$destroy",function(){var a=i.indexOf(f);a>-1&&i.splice(a,1)})}}),g.tasks.on.clean(c,function(b){void 0===b.est||a.isMoment(b.est)||(b.est=a(b.est)),void 0===b.lct||a.isMoment(b.lct)||(b.lct=a(b.lct))})}}}])}(),function(){"use strict";angular.module("gantt.sortable",["gantt","ang-drag-drop"]).directive("ganttSortable",["ganttUtils","$compile",function(a,b){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(c,d,e,f){var g=f.gantt.api;if(c.options&&"object"==typeof c.options.sortable)for(var h in c.options.sortable)c[h]=c.options[h];void 0===c.enabled&&(c.enabled=!0),g.directives.on["new"](c,function(d,e,f){"ganttRowLabel"===d&&(e.checkDraggable=function(){return a.firstProperty([e.row.model.sortable],"enabled",c.enabled)},e.onDropSuccess=function(){e.$evalAsync()},e.onDrop=function(a,b){var c=e.row.rowsManager.rowsMap[b.id];c!==e&&(e.row.rowsManager.moveRow(c,e.row),e.$evalAsync())},f.attr("ui-draggable","{{checkDraggable()}}"),f.attr("drag-channel","'sortable'"),f.attr("ui-on-drop","onDrop($event, $data)"),f.attr("on-drop-success","onDropSuccess()"),f.attr("drop-channel","'sortable'"),f.attr("drag","row.model"),b(f)(e))})}}}])}(),function(){"use strict";angular.module("gantt.tooltips",["gantt","gantt.tooltips.templates"]).directive("ganttTooltips",["$compile",function(a){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",dateFormat:"=?"},link:function(b,c,d,e){var f=e.gantt.api;if(b.options&&"object"==typeof b.options.tooltips)for(var g in b.options.tooltips)b[g]=b.options[g];void 0===b.enabled&&(b.enabled=!0),void 0===b.dateFormat&&(b.dateFormat="MMM DD, HH:mm");var h=[];b.$watch("dateFormat",function(a){angular.forEach(h,function(b){b.dateFormat=a})}),b.$watch("enabled",function(a){angular.forEach(h,function(b){b.enabled=a})}),f.directives.on["new"](b,function(c,d,e){if("ganttTask"===c){var f=d.$new();h.push(f),f.dateFormat=b.dateFormat,f.enabled=b.enabled,e.append(a('<gantt-tooltip ng-model="task"></gantt-tooltip>')(f)),f.$on("$destroy",function(){var a=h.indexOf(f);a>-1&&h.splice(a,1)})}})}}}])}(),function(){"use strict";angular.module("gantt.bounds").directive("ganttTaskBounds",[function(){return{restrict:"E",templateUrl:function(a,b){return void 0===b.templateUrl?"plugins/bounds/taskBounds.tmpl.html":b.templateUrl},replace:!0,scope:!0,controller:["$scope","$element",function(a,b){var c={};a.$watchGroup(["task.model.est","task.model.lct","task.left","task.width"],function(){void 0!==a.task.model.est&&void 0!==a.task.model.lct?(a.bounds={},a.bounds.left=a.task.rowsManager.gantt.getPositionByDate(a.task.model.est),a.bounds.width=a.task.rowsManager.gantt.getPositionByDate(a.task.model.lct)-a.bounds.left):a.bounds=void 0}),a.task.$element.bind("mouseenter",function(){a.isTaskMouseOver=!0,a.$digest()}),a.task.$element.bind("mouseleave",function(){a.isTaskMouseOver=!1,a.$digest()}),a.getCss=function(){return void 0!==a.bounds&&(c.width=a.bounds.width+"px",c.left=a.task.isMilestone()===!0||0===a.task.width?a.bounds.left-(a.task.left-.3)+"px":a.bounds.left-a.task.left+"px"),c},a.getClass=function(){return void 0===a.task.model.est||void 0===a.task.model.lct?"gantt-task-bounds-in":a.task.model.est>a.task.model.from?"gantt-task-bounds-out":a.task.model.lct<a.task.model.to?"gantt-task-bounds-out":"gantt-task-bounds-in"},a.task.rowsManager.gantt.api.directives.raise["new"]("ganttBounds",a,b),a.$on("$destroy",function(){a.task.rowsManager.gantt.api.directives.raise.destroy("ganttBounds",a,b)})}]}}])}(),function(){"use strict";angular.module("gantt.movable").factory("ganttMovableOptions",[function(){return{initialize:function(a){return a.enabled=void 0!==a.enabled?!!a.enabled:!0,a.allowMoving=void 0!==a.allowMoving?!!a.allowMoving:!0,a.allowResizing=void 0!==a.allowResizing?!!a.allowResizing:!0,a.allowRowSwitching=void 0!==a.allowRowSwitching?!!a.allowRowSwitching:!0,a}}}])}(),function(){"use strict";angular.module("gantt.progress").directive("ganttTaskProgress",[function(){return{restrict:"E",requires:"^ganttTask",templateUrl:function(a,b){return void 0===b.templateUrl?"plugins/progress/taskProgress.tmpl.html":b.templateUrl},replace:!0,scope:!0,controller:["$scope","$element",function(a,b){a.getClasses=function(){var b=[];return void 0!==a.task.model.progress&&"object"!=typeof a.task.model.progress&&(b=a.task.model.classes),b},a.getCss=function(){var b,c={};return void 0!==a.task.model.progress&&(b="object"==typeof a.task.model.progress?a.task.model.progress:{percent:a.task.model.progress}),b&&(c["background-color"]=b.color?b.color:"#6BC443",c.width=b.percent+"%"),c},a.task.rowsManager.gantt.api.directives.raise["new"]("ganttTaskProgress",a,b),a.$on("$destroy",function(){a.task.rowsManager.gantt.api.directives.raise.destroy("ganttTaskProgress",a,b)})}]}}])}(),function(){"use strict";angular.module("gantt.tooltips").directive("ganttTooltip",["$timeout","$document","ganttDebounce","ganttSmartEvent",function(a,b,c,d){return{restrict:"E",templateUrl:function(a,b){return void 0===b.templateUrl?"plugins/tooltips/tooltip.tmpl.html":b.templateUrl},scope:!0,replace:!0,controller:["$scope","$element","ganttUtils",function(e,f,g){var h,i,j=angular.element(b[0].body),k=f.parent();e.css={},e.visible=!1,e.getFromLabel=function(){var a=g.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"dateFormat",e.dateFormat);return e.task.model.from.format(a)},e.getToLabel=function(){var a=g.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"dateFormat",e.dateFormat);return e.task.model.to.format(a)},e.$watch("isTaskMouseOver",function(b){h&&a.cancel(h);var c=g.firstProperty([e.task.model.tooltips,e.task.row.model.tooltips],"enabled",e.enabled);c&&b===!0?h=a(function(){n(i)},500,!0):e.task.active||p()}),e.task.$element.bind("mousemove",function(a){i=a.clientX}),e.task.$element.bind("mouseenter",function(a){e.mouseEnterX=a.clientX,e.isTaskMouseOver=!0,e.$digest()}),e.task.$element.bind("mouseleave",function(){e.mouseEnterX=void 0,e.isTaskMouseOver=!1,e.$digest()});var l=d(e,j,"mousemove",c(function(a){o(a.clientX)},5,!1));e.$watch("task.isMoving",function(a){a===!0?l.bind():a===!1&&(l.unbind(),p())});var m=function(){var a=b[0];return a.documentElement.clientWidth||a.documentElement.getElementById("body")[0].clientWidth},n=function(b){e.visible=!0,a(function(){o(b),e.css.top=k[0].getBoundingClientRect().top+"px",e.css.marginTop=-f[0].offsetHeight-8+"px",e.css.opacity=1},0,!0)},o=function(a){a+f[0].offsetWidth>m()?(e.css.left=a+20-f[0].offsetWidth+"px",f.addClass("gantt-task-infoArrowR"),f.removeClass("gantt-task-infoArrow")):(e.css.left=a-20+"px",f.addClass("gantt-task-infoArrow"),f.removeClass("gantt-task-infoArrowR"))},p=function(){e.css.opacity=0,e.visible=!1};e.gantt.api.directives.raise["new"]("ganttTooltip",e,f),e.$on("$destroy",function(){e.gantt.api.directives.raise.destroy("ganttTooltip",e,f)})}]}}])}();
//# sourceMappingURL=angular-gantt-plugins.min.js.map